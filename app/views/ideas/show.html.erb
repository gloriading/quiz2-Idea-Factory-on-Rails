<div class="container mt-3">

  <div class="card mt-2 mb-5 border border-dark">
    <div class="card-header font-weight-bold">
      <h5 class="card-title"><%= @idea.title%></h5>
      <h6 class="card-subtitle mb-2 text-muted"><small>
        updated: <%= time_ago_in_words(@idea.updated_at) %> ago
      </small></h6>
    </div>
    <div class="card-body">
      <h6 class="card-subtitle mb-2 text-muted text-right">By:
        <%= @idea.user&.full_name || "[deleted]" %>
      </h6>
      <p class="card-text"><%= @idea.description %></p>

      <% if can?(:manage, @idea) %>

          <%= link_to(
               'Edit',
               edit_idea_path(@idea),
               class: "btn btn-outline-secondary btn-sm"
               )
           %>
          <%= link_to(
               'Delete',
               idea_path(@idea),
               class: "btn btn-outline-secondary btn-sm",
               method: :delete,
               data: {confirm: 'Are you sure what you are doing now ???'}
             )
          %>
      <% end %>
    </div>
  </div>

<%#------------------------------------------------------------------------%>

  <%= form_for [@idea, @review] do |f| %>
    <div class="form-group p-3 rounded" style="background-color: #b0aac2;">
      <h5>Write a review:</h5>
      <% if @review.errors.present? %>
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
          <%= @review.errors.full_messages.join(', ') %>
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
      <% end %>

      <div class="form-group row p-2">
        <%= f.label :review, class: "text-right col-sm-2" %>
        <%= f.text_area :body, class: "col-sm-10 form-control" %>

      </div>
      <%= f.submit "Submit Review", class: "btn btn-outline-light btn-sm mt-2" %>
    </div>
  <% end %>
<%#------------------------------------------------------------------------%>
  <% @reviews.each do |review| %>
     <div class="card my-2 border border-dark">
           <div class="card-body">
            <p><strong>Reviews:</strong> <%= review.body %></p>
            <p class="text-right">
              <i class="fa fa-user-o"></i><em>  <%= review.user.full_name %></em></p>
            <p class="text-right"><small>Created At: <%= time_ago_in_words(review.created_at) %> ago</small></p>

            <p>
              <% if can?(:destroy, review)%>
                <%= link_to(
                  'Delete',
                  idea_review_path(@idea, review),
                  data: {confirm: 'Are you sure?'},
                  class: "btn btn-outline-danger btn-sm",
                  method: :delete
                ) %>
              <% end %>
            </p>
          </div>
      </div>
  <% end %>

</div>
